/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!***************************!*\
  !*** ./src/background.js ***!
  \***************************/
var favorites = [];
var showGrid = false;
var fastLogin = true;
chrome.runtime.onInstalled.addListener(function (reason) {
  if (reason === chrome.runtime.OnInstalledReason.INSTALL) {
    chrome.storage.sync.set({
      favorites: favorites
    });
  }
  if (reason === chrome.runtime.OnInstalledReason.UPDATE) {}
  chrome.storage.sync.set({
    showGrid: showGrid
  });
  chrome.storage.sync.set({
    fastLogin: fastLogin
  });
});
chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {
  if (request.action === 'callMyFunction') {
    sendResponse({
      result: 'Function executed'
    });
  }
});
var TARGET_COOKIE = "DLOSITECORE_JOSSO_SESSIONID";
var LOCAL_HOST = "local.danskespil.dk";
function mirrorToLocal(cookie) {
  var _cookie$secure, _cookie$httpOnly;
  var params = {
    url: "https://".concat(LOCAL_HOST, "/"),
    name: TARGET_COOKIE,
    value: cookie.value,
    path: cookie.path || "/",
    secure: (_cookie$secure = cookie.secure) !== null && _cookie$secure !== void 0 ? _cookie$secure : true,
    httpOnly: (_cookie$httpOnly = cookie.httpOnly) !== null && _cookie$httpOnly !== void 0 ? _cookie$httpOnly : true,
    sameSite: cookie.sameSite || "no_restriction"
  };

  // Preserve expiry if it's a persistent cookie; omit for session cookies.
  if (typeof cookie.expirationDate === "number") {
    params.expirationDate = cookie.expirationDate;
  }
  chrome.cookies.set(params, function (setCookie) {
    if (chrome.runtime.lastError) {
      console.warn("Setting local cookie failed:", chrome.runtime.lastError);
    } else {
      console.log("Mirrored cookie to local:", setCookie);
    }
  });
}

// Listen for cookie creation/updates anywhere under *.danskespil.dk
chrome.cookies.onChanged.addListener(function (details) {
  if (details.removed) return;
  var cookie = details.cookie;

  // Only react to the specific cookie
  if (cookie.name !== TARGET_COOKIE) return;

  // Ignore our own mirror to local to prevent loops
  if (cookie.domain === LOCAL_HOST) return;

  // Only consider cookies belonging to townXX.danskespil.dk
  if (!(cookie.domain.startsWith("town") && cookie.domain.endsWith(".danskespil.dk"))) return;
  mirrorToLocal(cookie);
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixNQUFNLEdBQUdvQixPQUFPLENBQUNwQixNQUFNOztFQUU3QjtFQUNBLElBQUlBLE1BQU0sQ0FBQ00sSUFBSSxLQUFLVCxhQUFhLEVBQUU7O0VBRW5DO0VBQ0EsSUFBSUcsTUFBTSxDQUFDc0IsTUFBTSxLQUFLeEIsVUFBVSxFQUFFOztFQUVsQztFQUNBLElBQUksRUFBRUUsTUFBTSxDQUFDc0IsTUFBTSxDQUFDQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUl2QixNQUFNLENBQUNzQixNQUFNLENBQUNFLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUU7RUFFckZ6QixhQUFhLENBQUNDLE1BQU0sQ0FBQztBQUN2QixDQUFDLENBQUMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RzLWNocm9tZS1leHRlbnNpb24vLi9zcmMvYmFja2dyb3VuZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgZmF2b3JpdGVzID0gW107XHJcbmxldCBzaG93R3JpZCA9IGZhbHNlO1xyXG5sZXQgZmFzdExvZ2luID0gdHJ1ZTtcclxuXHJcbmNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKChyZWFzb24pID0+IHtcclxuICBpZiAocmVhc29uID09PSBjaHJvbWUucnVudGltZS5Pbkluc3RhbGxlZFJlYXNvbi5JTlNUQUxMKSB7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7IGZhdm9yaXRlcyB9KTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKHJlYXNvbiA9PT0gY2hyb21lLnJ1bnRpbWUuT25JbnN0YWxsZWRSZWFzb24uVVBEQVRFKSB7fVxyXG5cclxuICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7IHNob3dHcmlkIH0pO1xyXG4gIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsgZmFzdExvZ2luIH0pO1xyXG59KTtcclxuXHJcbmNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAocmVxdWVzdCwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcclxuICBpZiAocmVxdWVzdC5hY3Rpb24gPT09ICdjYWxsTXlGdW5jdGlvbicpIHtcclxuICAgIHNlbmRSZXNwb25zZSh7IHJlc3VsdDogJ0Z1bmN0aW9uIGV4ZWN1dGVkJyB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgVEFSR0VUX0NPT0tJRSA9IFwiRExPU0lURUNPUkVfSk9TU09fU0VTU0lPTklEXCI7XHJcbmNvbnN0IExPQ0FMX0hPU1QgPSBcImxvY2FsLmRhbnNrZXNwaWwuZGtcIjtcclxuXHJcbmZ1bmN0aW9uIG1pcnJvclRvTG9jYWwoY29va2llKSB7XHJcbiAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgdXJsOiBgaHR0cHM6Ly8ke0xPQ0FMX0hPU1R9L2AsXHJcbiAgICBuYW1lOiBUQVJHRVRfQ09PS0lFLFxyXG4gICAgdmFsdWU6IGNvb2tpZS52YWx1ZSxcclxuICAgIHBhdGg6IGNvb2tpZS5wYXRoIHx8IFwiL1wiLFxyXG4gICAgc2VjdXJlOiBjb29raWUuc2VjdXJlID8/IHRydWUsXHJcbiAgICBodHRwT25seTogY29va2llLmh0dHBPbmx5ID8/IHRydWUsXHJcbiAgICBzYW1lU2l0ZTogY29va2llLnNhbWVTaXRlIHx8IFwibm9fcmVzdHJpY3Rpb25cIlxyXG4gIH07XHJcblxyXG4gIC8vIFByZXNlcnZlIGV4cGlyeSBpZiBpdCdzIGEgcGVyc2lzdGVudCBjb29raWU7IG9taXQgZm9yIHNlc3Npb24gY29va2llcy5cclxuICBpZiAodHlwZW9mIGNvb2tpZS5leHBpcmF0aW9uRGF0ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgcGFyYW1zLmV4cGlyYXRpb25EYXRlID0gY29va2llLmV4cGlyYXRpb25EYXRlO1xyXG4gIH1cclxuXHJcbiAgY2hyb21lLmNvb2tpZXMuc2V0KHBhcmFtcywgKHNldENvb2tpZSkgPT4ge1xyXG4gICAgaWYgKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJTZXR0aW5nIGxvY2FsIGNvb2tpZSBmYWlsZWQ6XCIsIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk1pcnJvcmVkIGNvb2tpZSB0byBsb2NhbDpcIiwgc2V0Q29va2llKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLy8gTGlzdGVuIGZvciBjb29raWUgY3JlYXRpb24vdXBkYXRlcyBhbnl3aGVyZSB1bmRlciAqLmRhbnNrZXNwaWwuZGtcclxuY2hyb21lLmNvb2tpZXMub25DaGFuZ2VkLmFkZExpc3RlbmVyKChkZXRhaWxzKSA9PiB7XHJcbiAgaWYgKGRldGFpbHMucmVtb3ZlZCkgcmV0dXJuO1xyXG4gIGNvbnN0IGNvb2tpZSA9IGRldGFpbHMuY29va2llO1xyXG5cclxuICAvLyBPbmx5IHJlYWN0IHRvIHRoZSBzcGVjaWZpYyBjb29raWVcclxuICBpZiAoY29va2llLm5hbWUgIT09IFRBUkdFVF9DT09LSUUpIHJldHVybjtcclxuXHJcbiAgLy8gSWdub3JlIG91ciBvd24gbWlycm9yIHRvIGxvY2FsIHRvIHByZXZlbnQgbG9vcHNcclxuICBpZiAoY29va2llLmRvbWFpbiA9PT0gTE9DQUxfSE9TVCkgcmV0dXJuO1xyXG5cclxuICAvLyBPbmx5IGNvbnNpZGVyIGNvb2tpZXMgYmVsb25naW5nIHRvIHRvd25YWC5kYW5za2VzcGlsLmRrXHJcbiAgaWYgKCEoY29va2llLmRvbWFpbi5zdGFydHNXaXRoKFwidG93blwiKSAmJiBjb29raWUuZG9tYWluLmVuZHNXaXRoKFwiLmRhbnNrZXNwaWwuZGtcIikpKSByZXR1cm47XHJcblxyXG4gIG1pcnJvclRvTG9jYWwoY29va2llKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJmYXZvcml0ZXMiLCJzaG93R3JpZCIsImZhc3RMb2dpbiIsImNocm9tZSIsInJ1bnRpbWUiLCJvbkluc3RhbGxlZCIsImFkZExpc3RlbmVyIiwicmVhc29uIiwiT25JbnN0YWxsZWRSZWFzb24iLCJJTlNUQUxMIiwic3RvcmFnZSIsInN5bmMiLCJzZXQiLCJVUERBVEUiLCJvbk1lc3NhZ2UiLCJyZXF1ZXN0Iiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiYWN0aW9uIiwicmVzdWx0IiwiVEFSR0VUX0NPT0tJRSIsIkxPQ0FMX0hPU1QiLCJtaXJyb3JUb0xvY2FsIiwiY29va2llIiwiX2Nvb2tpZSRzZWN1cmUiLCJfY29va2llJGh0dHBPbmx5IiwicGFyYW1zIiwidXJsIiwiY29uY2F0IiwibmFtZSIsInZhbHVlIiwicGF0aCIsInNlY3VyZSIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJleHBpcmF0aW9uRGF0ZSIsImNvb2tpZXMiLCJzZXRDb29raWUiLCJsYXN0RXJyb3IiLCJjb25zb2xlIiwid2FybiIsImxvZyIsIm9uQ2hhbmdlZCIsImRldGFpbHMiLCJyZW1vdmVkIiwiZG9tYWluIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIl0sInNvdXJjZVJvb3QiOiIifQ==